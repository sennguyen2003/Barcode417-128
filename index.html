<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Barcode Generator Suite</title>
    
    <!-- Library for Reading Excel Files -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    
    <!-- Library for Generating Barcodes (PDF417 & Code128) -->
    <script src="https://cdn.jsdelivr.net/npm/bwip-js@3.2.1/dist/bwip-js-min.js"></script>

    <!-- Link to your CSS file -->
    <link rel="stylesheet" href="css/style.css">

</head>
<body>

    <div class="container">
        <nav class="app-switcher">
            <button id="switch-to-417" class="active">AAMVA PDF417 Generator</button>
            <button id="switch-to-128">Code 128 Generator</button>
        </nav>

        <!-- ================================================================= -->
        <!-- =================== APP 417 (PDF417) CONTAINER ================== -->
        <!-- ================================================================= -->
        <div id="app-417-container">
             <div class="grid-2-col">
                <!-- Input Column -->
                <div id="a417-input-fields">
                    <h2>AAMVA 2020 DL/ID Data Entry</h2>
                    <!-- Field Groups will be dynamically inserted here by JavaScript -->
                </div>
                <!-- Output Column -->
                <div id="a417-output-container">
                    <h2>Output Data & Export</h2>
                     <div class="a417-output-panes">
                        <div>
                            <h3>Imported Records List</h3>
                            <div class="table-container" style="max-height: 60vh;">
                                <table class="data-table">
                                    <thead>
                                        <tr><th>Filename</th><th>Name</th></tr>
                                    </thead>
                                    <tbody id="a417-records-table-body">
                                    </tbody>
                                </table>
                            </div>
                            <button id="a417-export-all-btn" style="width:100%; margin-top: 10px;">Export All Images</button>
                        </div>
                        <div>
                            <fieldset>
                                <legend>Bulk Export Settings</legend>
                                <div class="grid-2-col">
                                    <div><label>Scale: <input type="number" id="a417-scale-input" value="4"></label></div>
                                    <div><label>Padding: <input type="number" id="a417-padding-input" value="10"></label></div>
                                </div>
                                <p class="info-text">*Padding is for preview only. Bulk export padding is always 0.</p>
                                <hr>
                                <label><input type="checkbox" id="a417-fixed-size-check" checked> Export with fixed size</label>
                                <div class="grid-2-col">
                                    <div><label>Width (px): <input type="number" id="a417-fixed-width-input" value="1200"></label></div>
                                    <div><label>Height (px): <input type="number" id="a417-fixed-height-input" value="300"></label></div>
                                </div>
                                <hr>
                                <label>DPI: <input type="number" id="a417-dpi-input" value="300"></label>
                                <p class="info-text">*DPI is metadata for software like Photoshop.</p>
                            </fieldset>

                             <fieldset>
                                <legend>Image Preview</legend>
                                <div id="a417-barcode-preview">
                                    <p>Select a record or generate data to see preview.</p>
                                </div>
                            </fieldset>

                            <div>
                               <textarea id="a417-formatted-data" class="code-display" readonly placeholder="Formatted Data..."></textarea>
                               <textarea id="a417-raw-data" class="code-display" readonly placeholder="Raw AAMVA Data..."></textarea>
                            </div>
                        </div>
                     </div>
                </div>
            </div>
        </div>

        <!-- ================================================================= -->
        <!-- =================== APP 128 (Code128) CONTAINER ================= -->
        <!-- ================================================================= -->
        <div id="app-128-container" class="hidden">
             <h2>Code 128 Generator</h2>
            <fieldset>
                <legend>1. Import & 3. Export</legend>
                 <label for="a128-file-input" class="file-input-label">1. Import from Excel</label>
                 <input type="file" id="a128-file-input" accept=".xlsx, .xls">
                 <button id="a128-save-all-btn" disabled>3. Save All Barcodes</button>
            </fieldset>

            <div class="status-bar">
                <span id="a128-status-label">Ready to import file.</span>
                <progress id="a128-progress-bar" value="0" max="100"></progress>
            </div>
            
            <fieldset>
                <legend>2. Barcode Options</legend>
                <label><input type="checkbox" id="a128-show-text-check" checked> Show text below barcode</label>
                <label style="margin-left:20px;"><input type="checkbox" id="a128-transparent-bg-check"> Transparent background on save</label>
                <label style="margin-left:20px;">Height (px): <input type="number" id="a128-height-input" value="120" style="width: 80px;"></label>
            </fieldset>

            <div class="grid-2-col">
                <div>
                    <h3>Barcode List</h3>
                    <div class="table-container">
                        <table class="data-table">
                            <thead>
                                <tr><th>Filename</th><th>Code128 Data</th><th>Status</th></tr>
                            </thead>
                            <tbody id="a128-records-table-body">
                            </tbody>
                        </table>
                    </div>
                </div>
                <div>
                     <h3>Barcode Preview</h3>
                     <div id="a128-barcode-preview">
                         <p>Select an item to preview</p>
                     </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Link to your JavaScript files -->
    <!-- Modules must be loaded before the main app script that calls them -->
    <script src="js/pdf417-generator.js"></script>
    <script src="js/code128-generator.js"></script>
    <script src="js/app.js"></script>

</body>
</html>